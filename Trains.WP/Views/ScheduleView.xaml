<views:MvxWindowsPage x:Class="Trains.WP.Views.ScheduleView"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:local="using:Trains.WP.Views"
                      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                      xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
                      xmlns:core="using:Microsoft.Xaml.Interactions.Core"
                      mc:Ignorable="d"
                      xmlns:views="using:Cirrious.MvvmCross.WindowsCommon.Views"
                      Background="{StaticResource BackgroundColorBrush}"
                      RequestedTheme="Dark">

    <Grid Margin="5,0">
        <Pivot>
            <PivotItem Header="{Binding Request}"
                       FontSize="10">
                <SemanticZoom x:Name="Root"
                              Template="{StaticResource SemantickZoom}"
                              DataContext="{Binding Trains,Converter={StaticResource ListViewConverter}}">
                    <SemanticZoom.ZoomedInView>
                        <ListView x:Name="TrainList"
                                  ItemsSource="{Binding ElementName=Root,Path=DataContext.View}"
                                  ItemTemplate="{StaticResource ScheduleTemplate}">
                            <ListView.GroupStyle>
                                <GroupStyle HeaderTemplate="{StaticResource GenericGroupHeaderTemplate}"
                                            HeaderContainerStyle="{StaticResource JumpListListHeaderContainerStyle}"
                                            HidesIfEmpty="True" />
                            </ListView.GroupStyle>
                            <interactivity:Interaction.Behaviors>
                                <core:EventTriggerBehavior EventName="Tapped">
                                    <core:InvokeCommandAction Command="{Binding SelectTrainCommand}"
                                                              CommandParameter="{Binding ElementName=TrainList, Path=SelectedItem}"
                                                              InputConverter="{StaticResource SelectionChangedConverter}" />
                                </core:EventTriggerBehavior>
                            </interactivity:Interaction.Behaviors>
                        </ListView>
                    </SemanticZoom.ZoomedInView>
                    <SemanticZoom.ZoomedOutView>
                        <ListView ItemsSource="{Binding ElementName=Root,Path=DataContext.View.CollectionGroups}"
                                  ItemTemplate="{StaticResource GenericJumpListPickerItemTemplate}"
                                  Style="{StaticResource GenericJumpListPickerStyle}">
                        </ListView>
                    </SemanticZoom.ZoomedOutView>
                </SemanticZoom>
            </PivotItem>
        </Pivot>
    </Grid>
    <Page.BottomAppBar>
        <CommandBar>
            <AppBarButton x:Uid="HelpAppBar"
                          Icon="Help"
                          Command="{Binding GoToHelpCommand}" />
        </CommandBar>
    </Page.BottomAppBar>
</views:MvxWindowsPage>
