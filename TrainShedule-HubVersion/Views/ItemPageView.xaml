<Page
    x:Class="TrainShedule_HubVersion.Views.ItemPageView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:micro="using:Caliburn.Micro"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" d:DataContext="{d:DesignData ItemPageViewModel}">

    <Grid>
        <StackPanel>
            <ProgressBar IsIndeterminate="True" Visibility="{Binding VisibilityProgressBar}"/>
        </StackPanel>
        <StackPanel HorizontalAlignment="Center">
            <TextBlock x:Uid="SelectStantion" Style="{ThemeResource TitleTextBlockStyle}"/>
            <TextBlock Text="{Binding Title}" Style="{ThemeResource HeaderTextBlockStyle}"/>
        </StackPanel>
        <StackPanel Margin="0,95,0,0" Grid.RowSpan="2" MaxWidth="400">
            <DatePicker Date="{Binding Datum,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource DatePickerStyle}"/>
            <AutoSuggestBox x:Uid="From" Text="{Binding From, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource AutoSuggestBoxStyle}" ItemsSource="{Binding AutoSuggestions}"/>
            <Button Style="{StaticResource RoundByttonStyle}">
                <Button.Background>
                    <ImageBrush Stretch="UniformToFill" ImageSource="/Assets/appbar.refresh.png"/>
                </Button.Background>
            </Button>
            <AutoSuggestBox x:Uid="To" Style="{StaticResource AutoSuggestBoxStyle}"
                            Text="{Binding To, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding AutoSuggestions}" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                <Button x:Uid="Search" HorizontalAlignment="Left" VerticalAlignment="Top" micro:Message.Attach="[Event Click] = [Action Search]"/>
                <Button x:Uid="UpdateStopPoint"  Margin="5,0,0,0" micro:Message.Attach="[Event Click] = [Action UpdateTrainStop]"/>
            </StackPanel>
            <TextBlock x:Uid="LastRequest" Style="{ThemeResource TitleTextBlockStyle}" HorizontalAlignment="Center"/>
                <ListView 
                        IsItemClickEnabled="True"
                        ItemsSource="{Binding LastRequests}"
                        micro:Message.Attach="[Event ItemClick] = [Action SetRequest($clickeditem)]"
                        ItemTemplate="{StaticResource LastRequestTemplate}" HorizontalAlignment="Center">
            </ListView>
        </StackPanel>
    </Grid>
</Page>